<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Performance Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h2>Emotion Stats for Assignment</h2>

    <!-- Pass these from Flask using Jinja --
    <input type="hidden" id="username" value="{{ username }}">
    <input type="hidden" id="assignment_id" value="{{ assignment_id }}">

    <canvas id="emotionChart" width="600" height="600"></canvas>

    <script>
        const username = document.getElementById('username').value;
        const assignmentId = document.getElementById('assignment_id').value;

        fetch(`/get-emotions/${username}/${assignmentId}`)
            .then(response => response.json())
            .then(data => {
                const labels = Object.keys(data);
                const values = Object.values(data);

                const ctx = document.getElementById('emotionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Emotion Count',
                            data: values,
                            backgroundColor: [
                                '#FF6384',
                                '#36A2EB',
                                '#FFCE56',
                                '#4BC0C0',
                                '#9966FF',
                                '#FF9F40'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            },
                            title: {
                                display: true,
                                text: 'Emotion Distribution During Assignment'
                            }
                        }
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching emotion data:', error);
            });
    </script>
</body>
</html>
-->

<!--
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Performance Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #emotionChart {
            width: 300px !important;
            height: 300px !important;
        }
    </style>
</head>
<body>
    <h2>Emotion Stats for Assignment</h2>

    <!-- Pass these from Flask using Jinja --
    <input type="hidden" id="username" value="{{ username }}">
    <input type="hidden" id="assignment_id" value="{{ assignment_id }}">

    <canvas id="emotionChart" width="400" height="400"></canvas>

    <script>
        const username = document.getElementById('username').value;
        const assignmentId = document.getElementById('assignment_id').value;

        fetch(`/get-emotions/${username}/${assignmentId}`)
            .then(response => response.json())
            .then(data => {
                const labels = Object.keys(data);
                const values = Object.values(data);

                const ctx = document.getElementById('emotionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Emotion Count',
                            data: values,
                            backgroundColor: [
                                '#FF6384',
                                '#36A2EB',
                                '#FFCE56',
                                '#4BC0C0',
                                '#9966FF',
                                '#FF9F40'
                            ]
                        }]
                    },
                    options: {
                        responsive: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            },
                            title: {
                                display: true,
                                text: 'Emotion Distribution During Assignment'
                            }
                        }
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching emotion data:', error);
            });
    </script>
</body>
</html>
-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Performance Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #emotionChart {
            width: 300px !important;
            height: 300px !important;
        }
    </style>
</head>
<body>
    <h2>Emotion Stats for Assignment</h2>

    <!-- Hidden fields passed from Flask --
    <input type="hidden" id="username" value="{{ username }}">
    <input type="hidden" id="assignment_id" value="{{ assignment_id }}">

    <canvas id="emotionChart" width="800" height="700"></canvas>

    <script>
        const username = document.getElementById('username').value;
        const assignmentId = document.getElementById('assignment_id').value;

        fetch(`/get-emotions/${username}/${assignmentId}`)
            .then(response => response.json())
            .then(data => {
                const labels = Object.keys(data);
                const values = Object.values(data);

                const ctx = document.getElementById('emotionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',  // Changed from 'pie' to 'bar'
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Emotion Count',
                            data: values,
                            backgroundColor: '#36A2EB',
                            borderColor: '#1f78b4',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Count'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Emotions'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'Emotion Distribution During Assignment'
                            }
                        }
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching emotion data:', error);
            });
    </script>
</body>
</html>
-->
<!---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Performance Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #emotionChart {
            width: 600px;
            height: 400px;
        }
    </style>
</head>
<body>
    <h2>Emotion Stats for Assignment</h2>

    <!-- Hidden fields passed from Flask --
    <input type="hidden" id="username" value="{{ username }}">
    <input type="hidden" id="assignment_id" value="{{ assignment_id }}">

    <canvas id="emotionChart" width="600" height="400"></canvas>

    <script>
        const username = document.getElementById('username').value;
        const assignmentId = document.getElementById('assignment_id').value;

        fetch(`/get-emotions/${username}/${assignmentId}`)
            .then(response => response.json())
            .then(data => {
                const labels = Object.keys(data);
                const values = Object.values(data);

                const ctx = document.getElementById('emotionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Emotion Count',
                            data: values,
                            backgroundColor: '#36A2EB',
                            borderColor: '#1f78b4',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: false,  // Ensures fixed size is respected
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Count'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Emotions'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'Emotion Distribution During Assignment'
                            }
                        }
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching emotion data:', error);
            });
    </script>
</body>
</html>
-->
<!--

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Performance Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #emotionChart {
            width: 600px;
            height: 400px;
        }
    </style>
</head>
<body>
    <h1>Emotion Stats for Assignment</h1>

    <!-- Hidden fields passed from Flask --
    <input type="hidden" id="username" value="{{ username }}">
    <input type="hidden" id="assignment_id" value="{{ assignment_id }}">

    <canvas id="emotionChart" width="600" height="400"></canvas>

    <script>
        const username = document.getElementById('username').value;
        const assignmentId = document.getElementById('assignment_id').value;

        fetch(`/get-emotions/${username}/${assignmentId}`)
            .then(response => response.json())
            .then(data => {
                const labels = Object.keys(data);
                const values = Object.values(data);

                // Assign a different color for each bar
                const backgroundColors = [
                    '#FF6384', '#36A2EB', '#FFCE56',
                    '#4BC0C0', '#9966FF', '#FF9F40',
                    '#66D9E8', '#D67AB1', '#A1E44D',
                    '#FF6F61'
                ];

                const ctx = document.getElementById('emotionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Emotion Count',
                            data: values,
                            backgroundColor: backgroundColors.slice(0, labels.length), // match number of emotions
                            borderColor: backgroundColors.slice(0, labels.length),
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Count'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Emotions'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'Emotion Distribution During Assignment'
                            }
                        }
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching emotion data:', error);
            });
    </script>
</body>
</html>-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Performance Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #emotionChart {
            width: 600px;
            height: 400px;
        }
    </style>
</head>
<body>
    <h1>Emotion Stats for Assignment</h1>

    <!-- Hidden fields passed from Flask --
    <input type="hidden" id="username" value="{{ username }}">-->
    <input type="hidden" id="assignment_id" value="{{ assignment_id }}">

    <canvas id="emotionChart" width="600" height="400"></canvas>

    <script>
    // Use the passed emotion_counts from Flask (make sure to pass it in your route)
    const emotionCounts = {{ emotion_counts | tojson }};
    const labels = Object.keys(emotionCounts);
    const values = Object.values(emotionCounts);

    // Assign a different color for each bar
    const backgroundColors = [
        '#FF6384', '#36A2EB', '#FFCE56',
        '#4BC0C0', '#9966FF', '#FF9F40',
        '#66D9E8', '#D67AB1', '#A1E44D',
        '#FF6F61'
    ];

    const ctx = document.getElementById('emotionChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Emotion Count',
                data: values,
                backgroundColor: backgroundColors.slice(0, labels.length), // match number of emotions
                borderColor: backgroundColors.slice(0, labels.length),
                borderWidth: 1
            }]
        },
        options: {
            responsive: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Count'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Emotions'
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                title: {
                    display: true,
                    text: 'Emotion Distribution During Assignment'
                }
            }
        }
    });
</script>

</body>
</html>
